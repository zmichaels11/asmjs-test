model {
    components {
        graphics(NativeLibrarySpec) {
            targetPlatform 'asmjs'
            targetPlatform 'binaryen'
            targetPlatform 'x86_64'

            sources {
                cpp {
                    source {
                        srcDir 'src/main/cpp'
                        include '**/*.cpp'
                    }

                    exportedHeaders {
                        srcDirs '../share/src/main/include', 'src/main/include'
                        include '**/*.hpp'
                    }
                }
            }

            binaries.all {
                if (toolChain.name == 'emscripten') {                    
                    staticLibArchiver.args '-s', 'USE_WEBGL2=1', '-s', 'USE_GLFW=3'
                    cppCompiler.args '-s', 'USE_WEBGL2=1', '-s', 'USE_GLFW=3'
                    linker.args '-s', 'USE_WEBGL2=1', '-s', 'USE_GLFW=3'
                } else {
                    linker.args '-lGL', '-lglfw'
                }
            }
        }
    }
}